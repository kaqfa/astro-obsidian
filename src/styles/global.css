@import 'tailwindcss';
@import 'highlight.js/styles/github-dark.css';
@plugin "@tailwindcss/typography";

/* Blue Topaz Theme for Obsidian Web Viewer */
@theme {
  /* Colors - Dark Theme (Blue Topaz Dark) */
  --color-bg-primary: #1e1e1e;
  --color-bg-secondary: #252525;
  --color-bg-tertiary: #2d2d2d;
  --color-bg-elevated: #333333;

  /* Accent - Blue Topaz signature blue-teal */
  --color-accent: #67b3e7;
  --color-accent-hover: #8ac6ed;
  --color-accent-muted: #4c9fd9;

  /* Text - Softer contrast */
  --color-text-primary: #dcddde;
  --color-text-secondary: #b9bbbe;
  --color-text-muted: #8e9297;

  /* Borders - Subtle blue tint */
  --color-border: #3a3a3a;
  --color-border-light: #4a4a4a;

  /* Status */
  --color-success: #58c780;
  --color-warning: #f5a623;
  --color-error: #e74c3c;
}

/* Light Theme - Blue Topaz Light */
html.light {
  --color-bg-primary: #f5f6f8;
  --color-bg-secondary: #ebeef3;
  --color-bg-tertiary: #e1e4ea;
  --color-bg-elevated: #ffffff;

  /* Accent - Blue Topaz blue (slightly darker for light mode) */
  --color-accent: #4c9fd9;
  --color-accent-hover: #3a8fcc;
  --color-accent-muted: #67b3e7;

  /* Text */
  --color-text-primary: #2e3338;
  --color-text-secondary: #5c6370;
  --color-text-muted: #9199a3;

  /* Borders */
  --color-border: #d3d7de;
  --color-border-light: #c1c7d0;

  /* Status */
  --color-success: #58c780;
  --color-warning: #f5a623;
  --color-error: #e74c3c;
}

/* Base styles */
@layer base {
  html {
    @apply antialiased;
    transition:
      background-color 0.3s ease,
      color 0.3s ease;
  }

  body {
    @apply bg-bg-primary text-text-secondary font-sans;
    transition:
      background-color 0.3s ease,
      color 0.3s ease;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply text-text-primary font-semibold;
  }

  a {
    @apply text-accent hover:text-accent-hover transition-colors;
  }
}

/* Light theme explicit overrides for proper contrast */
html.light {
  body {
    @apply bg-white text-gray-700;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply text-gray-900;
  }

  /* Override Tailwind custom colors to use light theme vars */
  .text-text-primary {
    color: #2e3338 !important;
  }

  .text-text-secondary {
    color: #5c6370 !important;
  }

  .text-text-muted {
    color: #9199a3 !important;
  }

  .bg-bg-primary {
    background-color: #f5f6f8 !important;
  }

  .bg-bg-secondary {
    background-color: #ebeef3 !important;
  }

  .bg-bg-tertiary {
    background-color: #e1e4ea !important;
  }

  .bg-bg-elevated {
    background-color: #ffffff !important;
  }

  .border-border {
    border-color: #d3d7de !important;
  }

  .border-border-light {
    border-color: #c1c7d0 !important;
  }

  /* Prose content overrides for light theme */
  .prose {
    color: #5c6370 !important;
  }

  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4,
  .prose h5,
  .prose h6 {
    color: #2e3338 !important;
  }

  .prose p {
    color: #5c6370 !important;
  }

  .prose strong {
    color: #2e3338 !important;
  }

  .prose li {
    color: #5c6370 !important;
  }

  .prose a {
    color: #4c9fd9 !important;
  }

  .prose a:hover {
    color: #3a8fcc !important;
  }

  .prose a.broken-wikilink {
    color: #9199a3 !important;
  }

  .prose code {
    background-color: #e1e4ea !important;
    color: #3a8fcc !important;
  }

  .prose pre {
    background-color: #ebeef3 !important;
    border-color: #d3d7de !important;
  }

  .prose pre code {
    background-color: transparent !important;
    color: #5c6370 !important;
  }

  .prose blockquote {
    border-color: #4c9fd9 !important;
    background-color: rgba(235, 238, 243, 0.5) !important;
    color: #9199a3 !important;
  }

  .prose table th,
  .prose table td {
    border-color: #d3d7de !important;
    color: #5c6370 !important;
  }

  .prose table th {
    background-color: #ebeef3 !important;
    color: #2e3338 !important;
  }

  .prose table tr:hover {
    background-color: rgba(235, 238, 243, 0.5) !important;
  }

  /* Header and UI components */
  header {
    background-color: rgba(245, 246, 248, 0.8) !important;
    border-bottom-color: #d3d7de !important;
  }

  /* Sidebar */
  aside {
    background-color: #ebeef3 !important;
    border-right-color: #d3d7de !important;
  }

  /* Buttons and interactive elements */
  button {
    background-color: #e1e4ea !important;
    border-color: #d3d7de !important;
    color: #2e3338 !important;
  }

  button:hover {
    background-color: #ffffff !important;
    border-color: #4c9fd9 !important;
  }

  /* Input fields */
  input {
    background-color: #e1e4ea !important;
    border-color: #d3d7de !important;
    color: #2e3338 !important;
  }

  input::placeholder {
    color: #9199a3 !important;
  }

  /* Specific: Sync button with Blue Topaz accent */
  button.bg-accent,
  button.hover\:bg-accent-hover {
    background-color: #4c9fd9 !important;
    color: white !important;
  }

  /* Logout button */
  button.bg-error\/20 {
    background-color: rgba(231, 76, 60, 0.1) !important;
    color: #e74c3c !important;
  }
}

/* Custom utilities */
@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: var(--color-border) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: var(--color-border-light);
  }
}

/* Prose styling for markdown content */
@layer components {
  .prose {
    @apply text-text-secondary leading-relaxed;
  }

  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4,
  .prose h5,
  .prose h6 {
    @apply text-text-primary font-semibold mt-8 mb-4 scroll-mt-20;
  }

  .prose h1 {
    @apply text-3xl;
  }
  .prose h2 {
    @apply text-2xl border-b border-border pb-2;
  }
  .prose h3 {
    @apply text-xl;
  }
  .prose h4 {
    @apply text-lg;
  }

  .prose p {
    @apply mb-4;
  }

  .prose a {
    @apply text-accent hover:text-accent-hover underline underline-offset-2 transition-colors;
  }

  /* Broken wikilinks - muted style for non-existent links */
  .prose a.broken-wikilink {
    @apply text-text-muted no-underline cursor-default opacity-60;
  }

  .prose a.broken-wikilink:hover {
    @apply text-text-muted;
  }

  .prose strong {
    @apply text-text-primary font-semibold;
  }

  .prose code {
    @apply bg-bg-tertiary text-accent-hover px-1.5 py-0.5 rounded text-sm font-mono;
  }

  .prose pre {
    @apply bg-bg-secondary border border-border rounded-lg p-4 overflow-x-auto my-4;
  }

  .prose pre code {
    @apply bg-transparent p-0 text-text-secondary text-sm;
  }

  /* Code block wrapper with copy button */
  .code-block-wrapper {
    @apply relative my-4;
  }

  .code-block-wrapper pre {
    @apply my-0;
  }

  .copy-code-btn {
    @apply absolute top-2 right-2 px-3 py-1.5 bg-bg-elevated hover:bg-bg-tertiary border border-border hover:border-accent/50 rounded-md text-xs font-medium text-text-muted hover:text-text-primary transition-all duration-200 cursor-pointer opacity-0 group-hover:opacity-100;
  }

  .code-block-wrapper:hover .copy-code-btn {
    @apply opacity-100;
  }

  .copy-code-btn:active {
    @apply scale-95;
  }

  .copy-code-btn .copy-icon {
    @apply inline-block transition-transform;
  }

  .copy-code-btn.copied {
    @apply border-success/50 text-success;
  }

  .prose blockquote {
    @apply border-l-4 border-accent pl-4 py-1 my-4 text-text-muted italic bg-bg-secondary/50 rounded-r-lg;
  }

  .prose ul,
  .prose ol {
    @apply my-4 pl-6;
  }

  .prose li {
    @apply mb-2;
  }

  .prose ul > li {
    @apply list-disc;
  }

  .prose ol > li {
    @apply list-decimal;
  }

  .prose table {
    @apply w-full border-collapse my-4;
  }

  .prose th,
  .prose td {
    @apply border border-border px-4 py-2 text-left;
  }

  .prose th {
    @apply bg-bg-secondary font-semibold text-text-primary;
  }

  .prose tr:hover {
    @apply bg-bg-secondary/50;
  }

  .prose img {
    @apply rounded-lg my-4 max-w-full h-auto;
  }

  .prose hr {
    @apply border-border my-8;
  }

  /* Mermaid diagrams */
  .prose .mermaid {
    @apply bg-white rounded-lg p-4 my-4;
  }

  /* Excalidraw embeds */
  .prose .excalidraw-embed {
    @apply bg-white rounded-lg p-4 my-4 min-h-[400px];
  }

  /* Obsidian Callouts */
  .prose .callout {
    @apply bg-bg-secondary border-l-4 rounded-r-lg p-4 my-4;
  }

  .prose .callout-info {
    @apply border-blue-500;
  }
  .prose .callout-warning {
    @apply border-warning;
  }
  .prose .callout-error {
    @apply border-error;
  }
  .prose .callout-success {
    @apply border-success;
  }
}
